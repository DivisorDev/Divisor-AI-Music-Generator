<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Music Generator - Divisor Studio</title>
<style>
  /* ... (style remains same as your code) ... */
</style>
</head>
<body>
<h1>AI Music Generator</h1>
<label for="prompt">Describe your music:</label>
<input type="text" id="prompt" placeholder="e.g. happy Indian dance beat" />
<button id="generateBtn">Generate Music</button>
<div id="loading">Generating music... please wait.</div>
<div id="error"></div>
<audio id="player" controls style="display:none;"></audio>
<a id="downloadLink" href="#" download="generated_music.wav" style="display:none;">Download Music</a>
<div class="toggle-buttons">
  <button onclick="toggleSection('about')">About Us</button>
  <button onclick="toggleSection('howto')">How to Use</button>
  <button onclick="toggleSection('help')">Help</button>
</div>
<div id="about" class="content-section">
  <h2>About Us</h2>
  <!-- About content here -->
</div>
<div id="howto" class="content-section">
  <h2>How to Use This Website</h2>
  <!-- How to use content here -->
</div>
<div id="help" class="content-section">
  <h2>Need Help?</h2>
  <!-- Help content here -->
</div>
<footer>
  Powered by <strong>M Qasimâ€™s Divisor Studio</strong>
</footer>

<script>
const generateBtn = document.getElementById('generateBtn');
const promptInput = document.getElementById('prompt');
const loadingDiv = document.getElementById('loading');
const errorDiv = document.getElementById('error');
const player = document.getElementById('player');
const downloadLink = document.getElementById('downloadLink');

generateBtn.addEventListener('click', async () => {
  errorDiv.textContent = '';
  const prompt = promptInput.value.trim();
  if (!prompt) {
    errorDiv.textContent = 'Please enter a music description.';
    return;
  }
  loadingDiv.style.display = 'block';
  player.style.display = 'none';
  downloadLink.style.display = 'none';

  try {
    const response = await fetch('https://divisor-ai-music-generator-6.onrender.com/generate_music', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt })
    });
    const data = await response.json();
    const audioUrl = data.audio_url || data.result_url || data.audio || null;
    if (audioUrl) {
      player.src = audioUrl;
      player.style.display = 'block';
      downloadLink.href = audioUrl;
      downloadLink.style.display = 'inline-block';
    } else {
      errorDiv.textContent = 'Audio could not be generated. Try with a different prompt.';
      player.style.display = 'none';
      downloadLink.style.display = 'none';
    }
  } catch (e) {
    errorDiv.textContent = 'Failed to generate music. ' + e.message;
    player.style.display = 'none';
    downloadLink.style.display = 'none';
  }
  loadingDiv.style.display = 'none';
});

function toggleSection(sectionId) {
  const sections = document.querySelectorAll('.content-section');
  sections.forEach(sec => {
    if (sec.id === sectionId) {
      sec.classList.toggle('active');
    } else {
      sec.classList.remove('active');
    }
  });
}
</script>
</body>
</html>
